/*
 * doormat - http://jh3y.github.io/doormat
 *
 * @license MIT
 * @author jh3y
 * (c) 2016
 */
(function(){var e,n;n={CLASS:"dm",CURRENT_CLASS:"dm__pnl--crnt",DELAY:0,NEXT:"next",PREVIOUS:"previous",RESET:"reset"},e=window.Doormat=function(t){var r,i,l,o,s;if(l=document.querySelector("."+n.CLASS),!(this instanceof e))return new e(t);if(!l)throw Error("Doormat: Must pass an element instance");return s=function(e){var t;return t=i.current,t.className=t.className.replace(n.CURRENT_CLASS,""),t.style.top=e===n.NEXT?-t.DOORMAT_HEIGHT+"px":0,i.current=e===n.RESET?i.panels[0]:t[e+"ElementSibling"],i.current.className+=" "+n.CURRENT_CLASS},r=function(e){var t,r,l;for(l=0,t=0;t<i.panels.length;)r=i.panels[t],r.style.display="block",r.style.minHeight=window.innerHeight+"px",r.style.top="0px",r.DOORMAT_HEIGHT=r.offsetHeight,t+1!==i.panels.length&&0!==n.DELAY&&(r.DOORMAT_HEIGHT=r.DOORMAT_HEIGHT+window.innerHeight*(n.DELAY/100)),r.DOORMAT_POS=l,l+=r.DOORMAT_HEIGHT,t++;return document.body.style.height=l+"px",e?(window.scrollTo(0,0),s(n.RESET)):void 0},o=function(){var e,t;if(e=i.current,t=window.scrollY||window.pageYOffset,e.style.top=-(t-e.DOORMAT_POS)+"px",t>e.DOORMAT_HEIGHT+e.DOORMAT_POS){if(e.nextElementSibling)return s(n.NEXT)}else if(t<e.DOORMAT_POS&&e.previousElementSibling)return s(n.PREVIOUS)},window.onresize=r,window.onscroll=o,i=this,i.el=l,i.panels=i.el.children,t&&"number"==typeof t&&(n.DELAY=t),i.current=i.panels[0],i.current.className+=" "+n.CURRENT_CLASS,r(),i}}).call(this);