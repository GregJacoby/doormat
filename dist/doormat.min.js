/*
 * doormat - http://jh3y.github.io/doormat
 *
 * @license MIT
 * @author jh3y
 * (c) 2016
 */
(function(){var e,n;n={CLASS:"dm",CURRENT_CLASS:"dm__pnl--crnt",DELAY:0,NEXT:"next",PREVIOUS:"previous",RESET:"reset"},e=window.Doormat=function(t){var r,i,o,l,s;if(o=document.querySelector("."+n.CLASS),!(this instanceof e))return new e(t);if(!o)throw Error("Doormat: Must pass an element instance");return s=function(e){var t;return t=i.current,t.className=t.className.replace(n.CURRENT_CLASS,""),t.style.top=e===n.NEXT?-t.DOORMAT_HEIGHT+"px":0,i.current=e===n.RESET?i.panels[0]:t[e+"ElementSibling"],i.current.className+=" "+n.CURRENT_CLASS},r=function(e){var t,r,o,l;l=0,r=0,t="onorientationchange"in window?screen.height:window.innerHeight;for(;r<i.panels.length;)o=i.panels[r],o.style.display="block",o.style.minHeight=t+"px",o.style.top="0px",o.DOORMAT_HEIGHT=o.offsetHeight,r+1!==i.panels.length&&0!==n.DELAY&&(o.DOORMAT_HEIGHT=o.DOORMAT_HEIGHT+t*(n.DELAY/100)),o.DOORMAT_POS=l,l+=o.DOORMAT_HEIGHT,r++;return document.body.style.height=l+"px",e?(window.scrollTo(0,0),s(n.RESET)):void 0},l=function(){var e,t;if(e=i.current,t=window.scrollY||window.pageYOffset,e.style.top=-(t-e.DOORMAT_POS)+"px",t>e.DOORMAT_HEIGHT+e.DOORMAT_POS){if(e.nextElementSibling)return s(n.NEXT)}else if(t<e.DOORMAT_POS&&e.previousElementSibling)return s(n.PREVIOUS)},"onorientationchange"in window?window.onorientationchange=r:window.onresize=r,window.onscroll=l,i=this,i.el=o,i.panels=i.el.children,t&&"number"==typeof t&&(n.DELAY=t),i.current=i.panels[0],i.current.className+=" "+n.CURRENT_CLASS,r(),i}}).call(this);